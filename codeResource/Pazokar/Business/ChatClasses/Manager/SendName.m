
#import <Foundation/Foundation.h>

NSString *StringFromMyNimData(Byte *data);


//: hr_strings
Byte userConversationKey[] = {40, 10, 92, 5, 55, 196, 206, 187, 207, 208, 206, 197, 202, 195, 207, 131};

//: lv_strings
Byte kDisappointedQueryContent[] = {98, 10, 45, 10, 165, 136, 60, 251, 242, 198, 153, 163, 140, 160, 161, 159, 150, 155, 148, 160, 93};

//: en_strings
Byte dream_beerLabelPath[] = {96, 10, 75, 8, 244, 32, 255, 36, 176, 185, 170, 190, 191, 189, 180, 185, 178, 190, 69};

//: ug_strings
Byte app_mentorShowMsg[] = {35, 10, 52, 14, 84, 201, 231, 166, 204, 62, 156, 84, 128, 20, 169, 155, 147, 167, 168, 166, 157, 162, 155, 167, 241};

//: zh_strings
Byte dream_mallFormat[] = {30, 10, 28, 8, 201, 61, 30, 67, 150, 132, 123, 143, 144, 142, 133, 138, 131, 143, 81};

//: hant
Byte dreamCabinStr[] = {22, 4, 37, 11, 218, 186, 101, 172, 219, 236, 84, 141, 134, 147, 153, 116};

//: sl_strings
Byte userMigrationMsg[] = {30, 10, 67, 10, 228, 113, 195, 37, 98, 128, 182, 175, 162, 182, 183, 181, 172, 177, 170, 182, 202};

//: sk_strings
Byte dreamImageMsg[] = {99, 10, 30, 8, 44, 112, 127, 111, 145, 137, 125, 145, 146, 144, 135, 140, 133, 145, 225};

//: ro_strings
Byte user_neighborhoodUrl[] = {34, 10, 23, 13, 239, 242, 219, 137, 68, 38, 249, 197, 18, 137, 134, 118, 138, 139, 137, 128, 133, 126, 138, 128};

//: spa
Byte user_decorateJungleVerticalData[] = {37, 3, 53, 5, 76, 168, 165, 150, 25};

//: mt_strings
Byte showPopValue[] = {66, 10, 9, 5, 168, 118, 125, 104, 124, 125, 123, 114, 119, 112, 124, 151};

//: name
Byte notiFiveKey[] = {47, 4, 48, 11, 109, 109, 192, 175, 255, 28, 225, 158, 145, 157, 149, 140};

//: pt_strings
Byte dreamLiableMessage[] = {83, 10, 67, 7, 254, 114, 202, 179, 183, 162, 182, 183, 181, 172, 177, 170, 182, 195};

//: %@/%@.xml
Byte show_feeMsg[] = {93, 9, 85, 8, 30, 175, 194, 48, 122, 149, 132, 122, 149, 131, 205, 194, 193, 82};

//: tr_strings
Byte mainSoundAwarenessValue[] = {35, 10, 16, 6, 221, 110, 132, 130, 111, 131, 132, 130, 121, 126, 119, 131, 216};

//: resources
Byte showClotheValue[] = {60, 9, 71, 10, 27, 164, 248, 174, 155, 21, 185, 172, 186, 182, 188, 185, 170, 172, 186, 235};

//: et_strings
Byte dream_statueOverseeValue[] = {93, 10, 22, 5, 1, 123, 138, 117, 137, 138, 136, 127, 132, 125, 137, 26};

//: pl_strings
Byte noti_producerIdent[] = {10, 10, 12, 11, 126, 206, 209, 194, 238, 67, 212, 124, 120, 107, 127, 128, 126, 117, 122, 115, 127, 133};

//: cs_strings
Byte k_virusId[] = {48, 10, 13, 13, 90, 147, 234, 208, 196, 250, 251, 200, 250, 112, 128, 108, 128, 129, 127, 118, 123, 116, 128, 158};

//: bg_strings
Byte dream_spouseSeniorAdeStr[] = {42, 10, 20, 13, 149, 150, 61, 31, 192, 247, 170, 253, 40, 118, 123, 115, 135, 136, 134, 125, 130, 123, 135, 24};

//: hu_strings
Byte m_listIdent[] = {15, 10, 27, 12, 131, 175, 143, 105, 78, 109, 194, 232, 131, 144, 122, 142, 143, 141, 132, 137, 130, 142, 31};

//: ja_strings
Byte noti_gravityText[] = {17, 10, 97, 11, 10, 220, 41, 149, 233, 166, 167, 203, 194, 192, 212, 213, 211, 202, 207, 200, 212, 161};

//: zh_CN
Byte m_heapUrl[] = {26, 5, 72, 4, 194, 176, 167, 139, 150, 7};

//: ga_strings
Byte notiShowExplainMessage[] = {90, 10, 15, 7, 242, 81, 154, 118, 112, 110, 130, 131, 129, 120, 125, 118, 130, 153};

//: fr_strings
Byte notiInmateStr[] = {92, 10, 36, 10, 31, 8, 170, 130, 168, 205, 138, 150, 131, 151, 152, 150, 141, 146, 139, 151, 169};

//: ru_strings
Byte appDecorateTitle[] = {35, 10, 32, 6, 166, 91, 146, 149, 127, 147, 148, 146, 137, 142, 135, 147, 95};

//: th_strings
Byte dreamMentorValue[] = {8, 10, 28, 4, 144, 132, 123, 143, 144, 142, 133, 138, 131, 143, 242};

//: sv_strings
Byte user_pinText[] = {34, 10, 57, 14, 78, 110, 171, 243, 44, 33, 186, 158, 23, 228, 172, 175, 152, 172, 173, 171, 162, 167, 160, 172, 159};

//: lt_strings
Byte userMallText[] = {62, 10, 2, 6, 32, 151, 110, 118, 97, 117, 118, 116, 107, 112, 105, 117, 162};

//: string
Byte dream_clickInkFormat[] = {19, 6, 26, 10, 204, 53, 223, 140, 176, 179, 141, 142, 140, 131, 136, 129, 92};

//: hi_strings
Byte k_valuePath[] = {10, 10, 66, 12, 196, 153, 4, 141, 196, 64, 235, 69, 170, 171, 161, 181, 182, 180, 171, 176, 169, 181, 75};

//: pk_strings
Byte kCreatureAcquireTextMessage[] = {83, 10, 69, 8, 24, 12, 5, 56, 181, 176, 164, 184, 185, 183, 174, 179, 172, 184, 182};

//: ko_strings
Byte user_greenText[] = {78, 10, 6, 14, 201, 137, 75, 191, 5, 218, 239, 27, 95, 34, 113, 117, 101, 121, 122, 120, 111, 116, 109, 121, 151};

//: text
Byte kCelebrityValue[] = {18, 4, 25, 6, 192, 182, 141, 126, 145, 141, 177};

//: de_strings
Byte show_fainKey[] = {82, 10, 48, 10, 208, 22, 225, 142, 42, 114, 148, 149, 143, 163, 164, 162, 153, 158, 151, 163, 195};

//: bd_strings
Byte show_sourceMessage[] = {90, 10, 20, 4, 118, 120, 115, 135, 136, 134, 125, 130, 123, 135, 145};

//: vi_strings
Byte noti_vsMessage[] = {36, 10, 51, 5, 223, 169, 156, 146, 166, 167, 165, 156, 161, 154, 166, 134};

//: zh_hant_strings
Byte dream_withValue[] = {74, 15, 54, 5, 38, 176, 158, 149, 158, 151, 164, 170, 149, 169, 170, 168, 159, 164, 157, 169, 216};

//: da_strings
Byte notiTelevisionFormat[] = {73, 10, 52, 14, 54, 39, 63, 151, 230, 100, 235, 210, 160, 63, 152, 149, 147, 167, 168, 166, 157, 162, 155, 167, 189};

//: sa_strings
Byte userViewFormat[] = {19, 10, 1, 6, 166, 74, 116, 98, 96, 116, 117, 115, 106, 111, 104, 116, 79};

//: id_strings
Byte app_factorMessage[] = {23, 10, 78, 10, 108, 231, 31, 221, 72, 209, 183, 178, 173, 193, 194, 192, 183, 188, 181, 193, 187};

//: main_tab_my
Byte mainBeliefKey[] = {25, 11, 34, 7, 103, 251, 34, 143, 131, 139, 144, 129, 150, 131, 132, 129, 143, 155, 33};

//: it_strings
Byte dream_greenFormat[] = {37, 10, 34, 7, 127, 10, 217, 139, 150, 129, 149, 150, 148, 139, 144, 137, 149, 75};

//: spa_strings
Byte showPopKey[] = {29, 11, 63, 14, 13, 72, 6, 184, 114, 151, 159, 149, 87, 43, 178, 175, 160, 158, 178, 179, 177, 168, 173, 166, 178, 143};

//: lb_strings
Byte dream_lineMessage[] = {41, 10, 22, 11, 253, 232, 116, 254, 136, 13, 43, 130, 120, 117, 137, 138, 136, 127, 132, 125, 137, 24};

//: fi_strings
Byte userAfterTitle[] = {38, 10, 37, 7, 189, 220, 140, 139, 142, 132, 152, 153, 151, 142, 147, 140, 152, 221};

//: nl_strings
Byte k_baseballPateText[] = {72, 10, 81, 12, 23, 116, 201, 254, 55, 233, 20, 111, 191, 189, 176, 196, 197, 195, 186, 191, 184, 196, 9};

//: el_strings
Byte user_producerName[] = {23, 10, 83, 7, 154, 87, 232, 184, 191, 178, 198, 199, 197, 188, 193, 186, 198, 54};

//: eg_strings
Byte dream_recordNameFormat[] = {70, 10, 96, 7, 21, 53, 223, 197, 199, 191, 211, 212, 210, 201, 206, 199, 211, 236};

// __DEBUG__
// __CLOSE_PRINT__
//
//  SendName.m
//  NIM
//
//  Created by 彭爽 on 2022/6/24.
//  Copyright © 2022 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "BusyLanguageManager.h"
#import "SendName.h"
//: #import "BusyXMLReader.h"
#import "MarginTag.h"
//: #import "MyUserKit.h"
#import "Case.h"
//: #import "SSZipArchiveManager.h"
#import "ValuePraise.h"

//: @interface BusyLanguageManager ()<NSXMLParserDelegate>
@interface SendName ()<NSXMLParserDelegate>
//: @property (nonatomic ,strong) NSString *currentElementName;
@property (nonatomic ,strong) NSString *currentElementName;
//: @end
@end

//: @implementation BusyLanguageManager
@implementation SendName

//: static BusyLanguageManager *shareInstance = nil;
static SendName *user_makeFormat = nil;

//: + (BusyLanguageManager *)shareInstance{
+ (SendName *)along{
    //: @synchronized(self) {
    @synchronized(self) {
        //: if (shareInstance == nil) {
        if (user_makeFormat == nil) {
            //: shareInstance = [[BusyLanguageManager alloc] init];
            user_makeFormat = [[SendName alloc] init];
            //: shareInstance.langDict = [NSMutableDictionary dictionaryWithCapacity:100];
            user_makeFormat.langDict = [NSMutableDictionary dictionaryWithCapacity:100];
        }
        //: return shareInstance;
        return user_makeFormat;
    }
}

//: + (NSString *)getTextWithKey:(NSString *)key{
+ (NSString *)streetSmart:(NSString *)key{
    //: NSMutableDictionary *dict = [BusyLanguageManager shareInstance].langDict;
    NSMutableDictionary *dict = [SendName along].langDict;
    //: NSString *value = [dict objectForKey:key];
    NSString *value = [dict objectForKey:key];
    //: if (value == nil ) {
    if (value == nil ) {
        //: NSLog(@"value为空========%@",key);
        //: value = @"";
        value = @"";

    }
    //: return value;
    return value;
}

//: - (void)setLanguagre:(NSString *)langType{
- (void)setMagnitudeernationality:(NSString *)langType{

//    [self.langDict removeAllObjects];

    //: NSString *resourceType = @"zh_strings";
    NSString *resourceType = StringFromMyNimData(dream_mallFormat);
    //: if ([langType isEqualToString:@"en"]) {
    if ([langType isEqualToString:@"en"]) {
        //: resourceType = @"en_strings";
        resourceType = StringFromMyNimData(dream_beerLabelPath);
    //: }else if ([langType isEqualToString:@"th"]){
    }else if ([langType isEqualToString:@"th"]){
        //: resourceType = @"th_strings";
        resourceType = StringFromMyNimData(dreamMentorValue);
    //: }else if ([langType isEqualToString:@"vi"]){
    }else if ([langType isEqualToString:@"vi"]){
        //: resourceType = @"vi_strings";
        resourceType = StringFromMyNimData(noti_vsMessage);
    //: }else if ([langType isEqualToString:@"hi"]){
    }else if ([langType isEqualToString:@"hi"]){
        //: resourceType = @"hi_strings";
        resourceType = StringFromMyNimData(k_valuePath);
    //: }else if ([langType isEqualToString:@"ja"]){
    }else if ([langType isEqualToString:@"ja"]){
        //: resourceType = @"ja_strings";
        resourceType = StringFromMyNimData(noti_gravityText);
    //: }else if ([langType isEqualToString:@"ko"]){
    }else if ([langType isEqualToString:@"ko"]){
        //: resourceType = @"ko_strings";
        resourceType = StringFromMyNimData(user_greenText);
    //: }else if ([langType isEqualToString:@"spa"]){
    }else if ([langType isEqualToString:StringFromMyNimData(user_decorateJungleVerticalData)]){
        //: resourceType = @"spa_strings";
        resourceType = StringFromMyNimData(showPopKey);
    //: }else if ([langType isEqualToString:@"pt"]){
    }else if ([langType isEqualToString:@"pt"]){
        //: resourceType = @"pt_strings";
        resourceType = StringFromMyNimData(dreamLiableMessage);
    //: }else if ([langType isEqualToString:@"id"]){
    }else if ([langType isEqualToString:@"id"]){
        //: resourceType = @"id_strings";
        resourceType = StringFromMyNimData(app_factorMessage);
    //: }else if ([langType isEqualToString:@"it"]){
    }else if ([langType isEqualToString:@"it"]){
        //: resourceType = @"it_strings";
        resourceType = StringFromMyNimData(dream_greenFormat);
    //: }else if ([langType isEqualToString:@"eg"]){
    }else if ([langType isEqualToString:@"eg"]){
        //: resourceType = @"eg_strings";
        resourceType = StringFromMyNimData(dream_recordNameFormat);
    //: }else if ([langType isEqualToString:@"tr"]){
    }else if ([langType isEqualToString:@"tr"]){
        //: resourceType = @"tr_strings";
        resourceType = StringFromMyNimData(mainSoundAwarenessValue);
    //: }else if ([langType isEqualToString:@"ug"]){
    }else if ([langType isEqualToString:@"ug"]){
        //: resourceType = @"ug_strings";
        resourceType = StringFromMyNimData(app_mentorShowMsg);
    //: }else if ([langType isEqualToString:@"de"]){
    }else if ([langType isEqualToString:@"de"]){
        //: resourceType = @"de_strings";
        resourceType = StringFromMyNimData(show_fainKey);
    //: }else if ([langType isEqualToString:@"pk"]){
    }else if ([langType isEqualToString:@"pk"]){
        //: resourceType = @"pk_strings";
        resourceType = StringFromMyNimData(kCreatureAcquireTextMessage);
    //: }else if ([langType isEqualToString:@"sa"]){
    }else if ([langType isEqualToString:@"sa"]){
        //: resourceType = @"sa_strings";
        resourceType = StringFromMyNimData(userViewFormat);
    //: }else if ([langType isEqualToString:@"ru"]){
    }else if ([langType isEqualToString:@"ru"]){
        //: resourceType = @"ru_strings";
        resourceType = StringFromMyNimData(appDecorateTitle);
    //: }else if ([langType isEqualToString:@"bd"]){
    }else if ([langType isEqualToString:@"bd"]){
        //: resourceType = @"bd_strings";
        resourceType = StringFromMyNimData(show_sourceMessage);
    //: }else if ([langType isEqualToString:@"fr"]){
    }else if ([langType isEqualToString:@"fr"]){
        //: resourceType = @"fr_strings";
        resourceType = StringFromMyNimData(notiInmateStr);
    //: }else if ([langType isEqualToString:@"hant"]){
    }else if ([langType isEqualToString:StringFromMyNimData(dreamCabinStr)]){
        //: resourceType = @"zh_hant_strings";
        resourceType = StringFromMyNimData(dream_withValue);
    //: }else if ([langType containsString:@"sv"]){
    }else if ([langType containsString:@"sv"]){
        //: resourceType = @"sv_strings";
        resourceType = StringFromMyNimData(user_pinText);
    //: }else if ([langType containsString:@"sl"]){
    }else if ([langType containsString:@"sl"]){
        //: resourceType = @"sl_strings";
        resourceType = StringFromMyNimData(userMigrationMsg);
    //: }else if ([langType containsString:@"sk"]){
    }else if ([langType containsString:@"sk"]){
        //: resourceType = @"sk_strings";
        resourceType = StringFromMyNimData(dreamImageMsg);
    //: }else if ([langType containsString:@"ro"]){
    }else if ([langType containsString:@"ro"]){
        //: resourceType = @"ro_strings";
        resourceType = StringFromMyNimData(user_neighborhoodUrl);
    //: }else if ([langType containsString:@"pl"]){
    }else if ([langType containsString:@"pl"]){
        //: resourceType = @"pl_strings";
        resourceType = StringFromMyNimData(noti_producerIdent);
    //: }else if ([langType containsString:@"nl"]){
    }else if ([langType containsString:@"nl"]){
        //: resourceType = @"nl_strings";
        resourceType = StringFromMyNimData(k_baseballPateText);
    //: }else if ([langType containsString:@"mt"]){
    }else if ([langType containsString:@"mt"]){
        //: resourceType = @"mt_strings";
        resourceType = StringFromMyNimData(showPopValue);
    //: }else if ([langType containsString:@"lb"]){
    }else if ([langType containsString:@"lb"]){
        //: resourceType = @"lb_strings";
        resourceType = StringFromMyNimData(dream_lineMessage);
    //: }else if ([langType containsString:@"lt"]){
    }else if ([langType containsString:@"lt"]){
        //: resourceType = @"lt_strings";
        resourceType = StringFromMyNimData(userMallText);
    //: }else if ([langType containsString:@"lv"]){
    }else if ([langType containsString:@"lv"]){
        //: resourceType = @"lv_strings";
        resourceType = StringFromMyNimData(kDisappointedQueryContent);
    //: }else if ([langType containsString:@"bg"]){
    }else if ([langType containsString:@"bg"]){
        //: resourceType = @"bg_strings";
        resourceType = StringFromMyNimData(dream_spouseSeniorAdeStr);
    //: }else if ([langType containsString:@"hr"]){
    }else if ([langType containsString:@"hr"]){
        //: resourceType = @"hr_strings";
        resourceType = StringFromMyNimData(userConversationKey);
    //: }else if ([langType containsString:@"cs"]){
    }else if ([langType containsString:@"cs"]){
        //: resourceType = @"cs_strings";
        resourceType = StringFromMyNimData(k_virusId);
    //: }else if ([langType containsString:@"da"]){
    }else if ([langType containsString:@"da"]){
        //: resourceType = @"da_strings";
        resourceType = StringFromMyNimData(notiTelevisionFormat);
    //: }else if ([langType containsString:@"et"]){
    }else if ([langType containsString:@"et"]){
        //: resourceType = @"et_strings";
        resourceType = StringFromMyNimData(dream_statueOverseeValue);
    //: }else if ([langType containsString:@"fi"]){
    }else if ([langType containsString:@"fi"]){
        //: resourceType = @"fi_strings";
        resourceType = StringFromMyNimData(userAfterTitle);
    //: }else if ([langType containsString:@"el"]){
    }else if ([langType containsString:@"el"]){
        //: resourceType = @"el_strings";
        resourceType = StringFromMyNimData(user_producerName);
    //: }else if ([langType containsString:@"hu"]){
    }else if ([langType containsString:@"hu"]){
        //: resourceType = @"hu_strings";
        resourceType = StringFromMyNimData(m_listIdent);
    //: }else if ([langType containsString:@"ga"]){
    }else if ([langType containsString:@"ga"]){
        //: resourceType = @"ga_strings";
        resourceType = StringFromMyNimData(notiShowExplainMessage);
    }

    //: NSString *xmlFilePath = [[[SSZipArchiveManager sharedManager] getXML_filePath] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@/%@.xml", langType, resourceType]];
    NSString *xmlFilePath = [[[ValuePraise show] session] stringByAppendingPathComponent:[NSString stringWithFormat:StringFromMyNimData(show_feeMsg), langType, resourceType]];

    //: if (![[NSFileManager defaultManager] fileExistsAtPath:xmlFilePath]) {
    if (![[NSFileManager defaultManager] fileExistsAtPath:xmlFilePath]) {
        //: NSLog(@"XML file not found at path: %@", xmlFilePath);
        //: return;
        return;
    }

    //: NSData *xmlData = [NSData dataWithContentsOfFile:xmlFilePath];
    NSData *xmlData = [NSData dataWithContentsOfFile:xmlFilePath];
    //: if (!xmlData) {
    if (!xmlData) {
        //: NSLog(@"Failed to load XML data from file: %@", xmlFilePath);
        //: return;
        return;
    }

    //: NSError *error = nil;
    NSError *error = nil;
    //: if (error) {
    if (error) {
        //: NSLog(@"error : %@", error);
    }
    //: NSDictionary *result = [BusyXMLReader dictionaryForXMLData:xmlData error:&error];
    NSDictionary *result = [MarginTag messageError:xmlData range:&error];
//    NSDictionary *result = [NSDictionary dictionaryWithXML:xmlData];

    //: NSLog(@"result : %@", result);
    //: if (result) {
    if (result) {
        //: NSDictionary *resources = [result objectForKey:@"resources"];
        NSDictionary *resources = [result objectForKey:StringFromMyNimData(showClotheValue)];
        //: if (resources) {
        if (resources) {
            //: NSArray *string = [resources objectForKey:@"string"];
            NSArray *string = [resources objectForKey:StringFromMyNimData(dream_clickInkFormat)];
            //: if (string.count > 0) {
            if (string.count > 0) {
                //: [string enumerateObjectsUsingBlock:^(NSDictionary *obj, NSUInteger idx, BOOL * _Nonnull stop) {
                [string enumerateObjectsUsingBlock:^(NSDictionary *obj, NSUInteger idx, BOOL * _Nonnull stop) {
                    //: NSString *name = [obj objectForKey:@"name"];
                    NSString *name = [obj objectForKey:StringFromMyNimData(notiFiveKey)];
                    //: NSString *text = [obj objectForKey:@"text"];
                    NSString *text = [obj objectForKey:StringFromMyNimData(kCelebrityValue)];
                    //: [self.langDict setObject:text forKey:name];
                    [self.langDict setObject:text forKey:name];
                //: }];
                }];
            }
        }

//        NSArray *string = [result objectForKey:@"string"];
//        if (string.count > 0) {
//            [string enumerateObjectsUsingBlock:^(NSDictionary *obj, NSUInteger idx, BOOL * _Nonnull stop) {
//                NSString *name = [obj objectForKey:@"name"];
//                NSString *text = [obj objectForKey:@"_text"];
//                [self.langDict setObject:text forKey:name];
//            }];
//        }
    }
}

// 开始
//: - (void)parserDidStartDocument:(NSXMLParser *)parser {
- (void)parserDidStartDocument:(NSXMLParser *)parser {

    //: NSLog(@"开始");
}
//: - (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError{
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError{
    //: NSLog(@"出错");
}

// 获取节点头
//: - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary<NSString *,NSString *> *)attributeDict {
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary<NSString *,NSString *> *)attributeDict {

    //: if ([elementName isEqualToString:@"string"]) {
    if ([elementName isEqualToString:StringFromMyNimData(dream_clickInkFormat)]) {
        //: self.currentElementName = attributeDict[@"name"];
        self.currentElementName = attributeDict[StringFromMyNimData(notiFiveKey)];
        //NSLog(@"--------%@",_currentElementName);
    }

}

// 获取节点的值 (这个方法在获取到节点头和节点尾后，会分别调用一次)
//: - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    //: if (_currentElementName != nil) {
    if (_currentElementName != nil) {
        //: if ([_currentElementName isEqualToString:@"main_tab_my"]) {
        if ([_currentElementName isEqualToString:StringFromMyNimData(mainBeliefKey)]) {
            //: NSLog(@"%@",string);
        }
        //: [self.langDict setObject:string forKey:_currentElementName];
        [self.langDict setObject:string forKey:_currentElementName];
    }
}

// 获取节点尾
//: - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    //: _currentElementName = nil;
    _currentElementName = nil;
//    NSLog(@"end element : %@---%@----%@", elementName,namespaceURI,qName);


}

// 结束
//: - (void)parserDidEndDocument:(NSXMLParser *)parser {
- (void)parserDidEndDocument:(NSXMLParser *)parser {

    //: NSLog(@"结束");
    //: NSLog(@"%@",self.langDict);

    //发送修改语言通知

}

//: + (NSString *)getLocale{
+ (NSString *)subjectMatter{//th-TH  vi-VN
//    NSString *language = [DataMaxDefaults standardUserDefaults].language;
    //: NSString *locale = @"zh_CN";
    NSString *locale = StringFromMyNimData(m_heapUrl);
//    if ([language isEqualToString:@"en"]) {
//        return @"en_US";
//    }
    //: return locale;
    return locale;
}


//: @end
@end

Byte * MyNimDataToCache(Byte *data) {
    int forbidPerceive = data[0];
    int showLaser = data[1];
    Byte redConsciousness = data[2];
    int semenM = data[3];
    if (!forbidPerceive) return data + semenM;
    for (int i = semenM; i < semenM + showLaser; i++) {
        int value = data[i] - redConsciousness;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[semenM + showLaser] = 0;
    return data + semenM;
}

NSString *StringFromMyNimData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)MyNimDataToCache(data)];
}
